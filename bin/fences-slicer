#!/usr/bin/env node

var run = require('./../src/run');
var nconf = require('nconf');
var colors = require('colors');

// setup config
nconf.argv().env();

if (nconf.get('config')) {
  nconf.file({file: nconf.get('config')});
}

if (! (nconf.get('inputDir') && nconf.get('outputDir') && nconf.get('regions')) ) {
  console.error(colors.red('[Invalid usage]:'),
    'Must specify inputDir, outputDir, and regions. If using config file, use --config=<path>');
  process.exit(1);
}

/**
 * Execute slicing process. Create output files with any polygons
 * overlapping the specified regions.
 */
run(nconf.get('inputDir'), nconf.get('outputDir'), nconf.get('regions'));
